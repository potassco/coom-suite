type("root","product").
type("root.persons[0]","Person").
type("root.persons[1]","Person").
type("root.rooms[0]","Room").
type("root.rooms[1]","Room").
type("root.things[0]","Thing").
type("root.things[1]","Thing").
index("root.persons[0]",0).
index("root.persons[1]",1).
index("root.rooms[0]",0).
index("root.rooms[1]",1).
index("root.things[0]",0).
index("root.things[1]",1).
parent("root.persons[0]","root").
parent("root.persons[1]","root").
parent("root.rooms[0]","root").
parent("root.rooms[1]","root").
parent("root.things[0]","root").
parent("root.things[1]","root").
association("root.persons[0]","Room","roomsOwned",0,2).
association("root.persons[1]","Room","roomsOwned",0,2).
association("root.persons[0]","Thing","thingOwned",1,1).
association("root.persons[1]","Thing","thingOwned",1,1).
association("root.things[0]","Room","storedInRoom",1,1).
association("root.things[1]","Room","storedInRoom",1,1).
association("root.things[0]","Person","owner",1,1).
association("root.things[1]","Person","owner",1,1).
association("root.rooms[0]","Thing","things",1,1).
association("root.rooms[1]","Thing","things",1,1).
association("root.rooms[0]","Person","owner",1,1).
association("root.rooms[1]","Person","owner",1,1).
association_match("root.rooms[0]","owner","roomsOwned").
association_match("root.rooms[1]","owner","roomsOwned").
association_match("root.things[0]","owner","thingOwned").
association_match("root.things[1]","owner","thingOwned").
association_match("root.rooms[0]","things","storedInRoom").
association_match("root.rooms[1]","things","storedInRoom").
association_match("root.persons[0]","thingOwned","owner").
association_match("root.persons[1]","thingOwned","owner").
association_match("root.things[0]","storedInRoom","things").
association_match("root.things[1]","storedInRoom","things").
association_match("root.persons[0]","roomsOwned","owner").
association_match("root.persons[1]","roomsOwned","owner").
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),2),(("root.rooms[1]","root.persons[0]"),"owner",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),2),(("root.rooms[1]","root.persons[1]"),"owner",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),0),(("root.rooms[0]","root.persons[0]"),"owner",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),0),(("root.rooms[0]","root.persons[1]"),"owner",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),3),(("root.rooms[1]","root.persons[0]"),"owner",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),3),(("root.rooms[1]","root.persons[1]"),"owner",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),1),(("root.rooms[0]","root.persons[0]"),"owner",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),1),(("root.rooms[0]","root.persons[1]"),"owner",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),2),(("root.rooms[1]","root.persons[0]"),"owner",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),2),(("root.rooms[1]","root.persons[1]"),"owner",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),0),(("root.rooms[0]","root.persons[0]"),"owner",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),0),(("root.rooms[0]","root.persons[1]"),"owner",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),3),(("root.rooms[1]","root.persons[0]"),"owner",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),3),(("root.rooms[1]","root.persons[1]"),"owner",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),1),(("root.rooms[0]","root.persons[0]"),"owner",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),1),(("root.rooms[0]","root.persons[1]"),"owner",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),1),(("root.things[1]","root.rooms[0]"),"storedInRoom",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),1),(("root.things[1]","root.rooms[0]"),"storedInRoom",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),3),(("root.things[1]","root.rooms[1]"),"storedInRoom",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),3),(("root.things[1]","root.rooms[1]"),"storedInRoom",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),0),(("root.things[0]","root.rooms[0]"),"storedInRoom",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),0),(("root.things[0]","root.rooms[0]"),"storedInRoom",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),2),(("root.things[0]","root.rooms[1]"),"storedInRoom",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),2),(("root.things[0]","root.rooms[1]"),"storedInRoom",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),1),(("root.things[1]","root.rooms[0]"),"storedInRoom",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),1),(("root.things[1]","root.rooms[0]"),"storedInRoom",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),3),(("root.things[1]","root.rooms[1]"),"storedInRoom",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),3),(("root.things[1]","root.rooms[1]"),"storedInRoom",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),0),(("root.things[0]","root.rooms[0]"),"storedInRoom",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),0),(("root.things[0]","root.rooms[0]"),"storedInRoom",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),2),(("root.things[0]","root.rooms[1]"),"storedInRoom",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),2),(("root.things[0]","root.rooms[1]"),"storedInRoom",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),2),(("root.persons[0]","root.things[0]"),"thingOwned",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),2),(("root.persons[0]","root.things[0]"),"thingOwned",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),0),(("root.persons[0]","root.things[0]"),"thingOwned",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),0),(("root.persons[0]","root.things[0]"),"thingOwned",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),3),(("root.persons[0]","root.things[1]"),"thingOwned",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),3),(("root.persons[0]","root.things[1]"),"thingOwned",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),1),(("root.persons[0]","root.things[1]"),"thingOwned",0)).
replace((("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),1),(("root.persons[0]","root.things[1]"),"thingOwned",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),2),(("root.persons[1]","root.things[0]"),"thingOwned",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),2),(("root.persons[1]","root.things[0]"),"thingOwned",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),0),(("root.persons[1]","root.things[0]"),"thingOwned",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),0),(("root.persons[1]","root.things[0]"),"thingOwned",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),3),(("root.persons[1]","root.things[1]"),"thingOwned",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),3),(("root.persons[1]","root.things[1]"),"thingOwned",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[0]"),1),(("root.persons[1]","root.things[1]"),"thingOwned",0)).
replace((("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","root.persons[1]"),1),(("root.persons[1]","root.things[1]"),"thingOwned",0)).
constraint(("root.persons",2),"lowerbound").
constraint(("root.rooms",2),"lowerbound").
constraint(("root.things",2),"lowerbound").
constraint((0,"!count(root.persons[0])=1||root.persons[0].thingOwned[0].storedInRoom[0].owner[0]=root.persons[0]"),"boolean").
constraint((0,"!count(root.persons[1])=1||root.persons[1].thingOwned[0].storedInRoom[0].owner[0]=root.persons[1]"),"boolean").
function("count(root.persons[0])","count","root.persons[0]").
function("count(root.persons[1])","count","root.persons[1]").
set("root.persons","root.persons[0]").
set("root.persons","root.persons[1]").
set("root.rooms","root.rooms[0]").
set("root.rooms","root.rooms[1]").
set("root.things","root.things[0]").
set("root.things","root.things[1]").
set("root.persons[0]","root.persons[0]").
set("root.persons[1]","root.persons[1]").
binary("root.persons[1].thingOwned[0].storedInRoom[0].owner[0]=root.persons[1]","root.persons[1].thingOwned[0].storedInRoom[0].owner[0]","=","root.persons[1]").
binary("root.persons[0].thingOwned[0].storedInRoom[0].owner[0]=root.persons[0]","root.persons[0].thingOwned[0].storedInRoom[0].owner[0]","=","root.persons[0]").
binary("count(root.persons[0])=1","count(root.persons[0])","=","1").
binary("count(root.persons[1])=1","count(root.persons[1])","=","1").
binary("!count(root.persons[0])=1||root.persons[0].thingOwned[0].storedInRoom[0].owner[0]=root.persons[0]","!count(root.persons[0])=1","||","root.persons[0].thingOwned[0].storedInRoom[0].owner[0]=root.persons[0]").
binary("!count(root.persons[1])=1||root.persons[1].thingOwned[0].storedInRoom[0].owner[0]=root.persons[1]","!count(root.persons[1])=1","||","root.persons[1].thingOwned[0].storedInRoom[0].owner[0]=root.persons[1]").
number("1",1).
unary("!count(root.persons[0])=1","!","count(root.persons[0])=1").
unary("!count(root.persons[1])=1","!","count(root.persons[1])=1").
part("product").
part("Person").
part("Thing").
part("Room").
explanation(0,"Each thing has to be stored in a room owned by the thing's owner").
user_associate(("root.persons[0]","root.things[0]")).
user_associate(("root.persons[1]","root.things[1]")).
