discrete("ModuleType").
discrete("ElementType").
domain("ModuleType","I").
domain("ModuleType","II").
domain("ElementType","A").
domain("ElementType","B").
type("root","product").
type("root.modules[0]","Module").
type("root.modules[1]","Module").
type("root.elements[0]","Element").
type("root.elements[0].type[0]","ElementType").
type("root.modules[1].type[0]","ModuleType").
type("root.modules[0].type[0]","ModuleType").
index("root.modules[0]",0).
index("root.modules[1]",1).
index("root.elements[0]",0).
index("root.elements[0].type[0]",0).
index("root.modules[1].type[0]",0).
index("root.modules[0].type[0]",0).
parent("root.modules[0]","root").
parent("root.modules[1]","root").
parent("root.elements[0]","root").
parent("root.elements[0].type[0]","root.elements[0]").
parent("root.modules[1].type[0]","root.modules[1]").
parent("root.modules[0].type[0]","root.modules[0]").
association("root.elements[0]","Module",1,2).
replace(("root.elements[0].modules[0]","root.modules[0]"),(("root.elements[0]","root.modules[0]"),0)).
replace(("root.elements[0].modules[0]","root.modules[1]"),(("root.elements[0]","root.modules[1]"),0)).
replace(("root.elements[0].modules[1]","root.modules[0]"),(("root.elements[0]","root.modules[0]"),1)).
replace(("root.elements[0].modules[1]","root.modules[1]"),(("root.elements[0]","root.modules[1]"),1)).
replace(("root.elements[0].modules[1].type[0]","root.modules[1].type[0]"),(("root.elements[0]","root.modules[1]"),1)).
replace(("root.elements[0].modules[1].type[0]","root.modules[0].type[0]"),(("root.elements[0]","root.modules[0]"),1)).
replace(("root.elements[0].modules[0].type[0]","root.modules[1].type[0]"),(("root.elements[0]","root.modules[1]"),0)).
replace(("root.elements[0].modules[0].type[0]","root.modules[0].type[0]"),(("root.elements[0]","root.modules[0]"),0)).
constraint(("root.modules",0),"lowerbound").
constraint(("root.elements",0),"lowerbound").
constraint(("root.modules[0].type",1),"lowerbound").
constraint(("root.modules[1].type",1),"lowerbound").
constraint(("root.elements[0].type",1),"lowerbound").
constraint((0,"!root.elements[0].type[0]=A||count(root.elements[0].modules)=1&&root.elements[0].modules[1].type[0]=I"),"boolean").
constraint((0,"!root.elements[0].type[0]=A||count(root.elements[0].modules)=1&&root.elements[0].modules[0].type[0]=I"),"boolean").
constraint((1,"!root.elements[0].type[0]=B||count(root.elements[0].modules)=2"),"boolean").
constraint((2,"!root.elements[0].type[0]=B||root.elements[0].modules[0].type[0]=II"),"boolean").
constraint((2,"!root.elements[0].type[0]=B||root.elements[0].modules[1].type[0]=II"),"boolean").
function("count(root.elements[0].modules)","count","root.elements[0].modules").
set("root.modules","root.modules[0]").
set("root.modules","root.modules[1]").
set("root.elements","root.elements[0]").
set("root.modules[0].type","root.modules[0].type[0]").
set("root.modules[1].type","root.modules[1].type[0]").
set("root.elements[0].type","root.elements[0].type[0]").
set("root.elements[0].modules","root.elements[0].modules[0]").
set("root.elements[0].modules","root.elements[0].modules[1]").
binary("count(root.elements[0].modules)=2","count(root.elements[0].modules)","=","2").
binary("count(root.elements[0].modules)=1","count(root.elements[0].modules)","=","1").
binary("root.elements[0].modules[1].type[0]=II","root.elements[0].modules[1].type[0]","=","II").
binary("root.elements[0].modules[0].type[0]=II","root.elements[0].modules[0].type[0]","=","II").
binary("root.elements[0].type[0]=B","root.elements[0].type[0]","=","B").
binary("root.elements[0].modules[1].type[0]=I","root.elements[0].modules[1].type[0]","=","I").
binary("root.elements[0].modules[0].type[0]=I","root.elements[0].modules[0].type[0]","=","I").
binary("root.elements[0].type[0]=A","root.elements[0].type[0]","=","A").
binary("count(root.elements[0].modules)=1&&root.elements[0].modules[0].type[0]=I","count(root.elements[0].modules)=1","&&","root.elements[0].modules[0].type[0]=I").
binary("count(root.elements[0].modules)=1&&root.elements[0].modules[1].type[0]=I","count(root.elements[0].modules)=1","&&","root.elements[0].modules[1].type[0]=I").
binary("!root.elements[0].type[0]=A||count(root.elements[0].modules)=1&&root.elements[0].modules[1].type[0]=I","!root.elements[0].type[0]=A","||","count(root.elements[0].modules)=1&&root.elements[0].modules[1].type[0]=I").
binary("!root.elements[0].type[0]=A||count(root.elements[0].modules)=1&&root.elements[0].modules[0].type[0]=I","!root.elements[0].type[0]=A","||","count(root.elements[0].modules)=1&&root.elements[0].modules[0].type[0]=I").
binary("!root.elements[0].type[0]=B||count(root.elements[0].modules)=2","!root.elements[0].type[0]=B","||","count(root.elements[0].modules)=2").
binary("!root.elements[0].type[0]=B||root.elements[0].modules[0].type[0]=II","!root.elements[0].type[0]=B","||","root.elements[0].modules[0].type[0]=II").
binary("!root.elements[0].type[0]=B||root.elements[0].modules[1].type[0]=II","!root.elements[0].type[0]=B","||","root.elements[0].modules[1].type[0]=II").
number("1",1).
number("2",2).
unary("!root.elements[0].type[0]=A","!","root.elements[0].type[0]=A").
unary("!root.elements[0].type[0]=B","!","root.elements[0].type[0]=B").
part("product").
part("Module").
part("Element").
constant("A").
constant("I").
constant("B").
constant("II").
explanation(0,"An ElementA requires exactly one ModuleI").
explanation(1,"An ElementB requires exactly two ModuleII").
user_include("root.elements[0]").
user_value("root.elements[0].type[0]","B").
